<script type="text/ng-template" id="headerModal.html" >
  <div class="modal-body">
    <style>
      .cropArea {
          background: #E4E4E4;
          overflow: hidden;
          width:500px;
          height:350px;
          max-width: 100%;
      }
      form .progress {
          line-height: 15px;
      }
      .progress {
          display: inline-block;
          width: 100px;
          border: 3px groove #CCC;
      }
      .progress div {
          font-size: smaller;
          background: orange;
          width: 0;
      }
    </style>
    <h3>Imagem de capa</h3><br>
    <img class="c" ng-show="!picFile" ng-src="{{ head.avatar }}"
    <% if @isLogged then%>
      onclick="$('#avatarImgSelect').trigger('click');"
    <% end %>
    />
    <div class='row' ng-if='picFile != undefined' class="content">
      <div ngf-drop ng-model="picFile"
           ngf-pattern="image/*" class="cropArea center-block">
        <img-crop
          image="picFile | ngfDataUrl"
          result-image="croppedDataUrl"
          ng-init="croppedDataUrl=''" >
        </img-crop>
      </div>
      <br>
      <button ng-disabled="isDisabled" ng-show="isLogged && picFile" class="btn btn-primary" ng-click="search(); upload(croppedDataUrl, picFile.name)">
        <span ng-show="searchButtonText == 'Enviando'"><i class="glyphicon glyphicon-refresh spinning"></i></span>
        {{ searchButtonText }}
      </button>
      <span ng-show="result">Enviado com sucesso</span>
      <span class="err" ng-show="errorMsg">{{errorMsg}}</span>
   </div>
   <br>
   <button class="btn btn-primary"  ng-click="cancel()" >Cancelar</button>
   <button id=avatarImgSelect
           style="display:none"
           ngf-fix-orientation="true"
           ng-init="imgSelectTriger()"
           class="btn btn-primary"
           ng-show="isLogged"
           ngf-select
           ng-model="picFile"
           accept="image/*">Selecionar imagem</button>
 </div>
</script>
